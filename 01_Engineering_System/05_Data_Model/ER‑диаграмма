
Так блок автоматически отрендерится как диаграмма прямо на GitHub, без картинок и внешних сервисов.[3][1]

## Вариант 2: DBML как код

Ниже в том же README можно оставить исходный DBML, чтобы показать «источник истины» для ERD.[4]

```markdown
## DBML‑описание схемы

```dbml
Table projects {
  id uuid [pk]
  name varchar(255)
  description text
  status varchar(32)
  created_at timestamptz
  updated_at timestamptz
}

Table nodes {
  id uuid [pk]
  project_id uuid
  code varchar(64)
  name varchar(255)
  node_type varchar(32)
  elevation_m numeric(10,3)
  created_at timestamptz
  updated_at timestamptz
}

Table pipes {
  id uuid [pk]
  project_id uuid
  from_node_id uuid
  to_node_id uuid
  code varchar(64)
  name varchar(255)
  length_m numeric(12,3)
  internal_diameter_m numeric(10,4)
  roughness_m numeric(10,6)
  created_at timestamptz
  updated_at timestamptz
}

Table calculations {
  id uuid [pk]
  project_id uuid
  status varchar(32)
  started_at timestamptz
  finished_at timestamptz
  template_id uuid
  parameters_json jsonb
  error_message text
  created_at timestamptz
  updated_at timestamptz
}

Table calculation_results {
  id uuid [pk]
  calculation_id uuid
  node_id uuid
  segment_id uuid
  pressure_pa numeric(18,4)
  temperature_k numeric(18,4)
  flow_rate_kg_s numeric(18,6)
  additional_json jsonb
  created_at timestamptz
}

Table templates {
  id uuid [pk]
  project_id uuid
  name varchar(255)
  description text
  parameters_json jsonb
  is_default boolean
  created_at timestamptz
  updated_at timestamptz
}

Table import_logs {
  id uuid [pk]
  project_id uuid
  source_system varchar(64)
  status varchar(32)
  message text
  started_at timestamptz
  finished_at timestamptz
  created_at timestamptz
}

Table error_logs {
  id uuid [pk]
  project_id uuid
  calculation_id uuid
  severity varchar(16)
  code varchar(64)
  message text
  context_json jsonb
  created_at timestamptz
}

Ref: nodes.project_id > projects.id
Ref: pipes.project_id > projects.id
Ref: pipes.from_node_id > nodes.id
Ref: pipes.to_node_id > nodes.id
Ref: calculations.project_id > projects.id
Ref: calculations.template_id > templates.id
Ref: calculation_results.calculation_id > calculations.id
Ref: calculation_results.node_id > nodes.id
Ref: calculation_results.segment_id > pipes.id
Ref: templates.project_id > projects.id
Ref: import_logs.project_id > projects.id
Ref: error_logs.project_id > projects.id
Ref: error_logs.calculation_id > calculations.id
