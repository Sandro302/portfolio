## ER‑диаграмма

```mermaid
erDiagram
    PROJECTS {
        uuid id
        varchar name
        text description
        varchar status
        timestamptz created_at
        timestamptz updated_at
    }

    NODES {
        uuid id
        uuid project_id
        varchar code
        varchar name
        varchar node_type
        numeric elevation_m
        timestamptz created_at
        timestamptz updated_at
    }

    PIPES {
        uuid id
        uuid project_id
        uuid from_node_id
        uuid to_node_id
        varchar code
        varchar name
        numeric length_m
        numeric internal_diameter_m
        numeric roughness_m
        timestamptz created_at
        timestamptz updated_at
    }

    CALCULATIONS {
        uuid id
        uuid project_id
        varchar status
        timestamptz started_at
        timestamptz finished_at
        uuid template_id
        jsonb parameters_json
        text error_message
        timestamptz created_at
        timestamptz updated_at
    }

    CALCULATION_RESULTS {
        uuid id
        uuid calculation_id
        uuid node_id
        uuid segment_id
        numeric pressure_pa
        numeric temperature_k
        numeric flow_rate_kg_s
        jsonb additional_json
        timestamptz created_at
    }

    TEMPLATES {
        uuid id
        uuid project_id
        varchar name
        text description
        jsonb parameters_json
        boolean is_default
        timestamptz created_at
        timestamptz updated_at
    }

    IMPORT_LOGS {
        uuid id
        uuid project_id
        varchar source_system
        varchar status
        text message
        timestamptz started_at
        timestamptz finished_at
        timestamptz created_at
    }

    ERROR_LOGS {
        uuid id
        uuid project_id
        uuid calculation_id
        varchar severity
        varchar code
        text message
        jsonb context_json
        timestamptz created_at
    }

    NODES ||--o{ PROJECTS : "project_id > id"
    PIPES ||--o{ PROJECTS : "project_id > id"
    PIPES }o--|| NODES : "from_node_id > id"
    PIPES }o--|| NODES : "to_node_id > id"
    CALCULATIONS ||--o{ PROJECTS : "project_id > id"
    CALCULATIONS ||--|| TEMPLATES : "template_id > id"
    CALCULATION_RESULTS ||--o{ CALCULATIONS : "calculation_id > id"
    CALCULATION_RESULTS }o--|| NODES : "node_id > id"
    CALCULATION_RESULTS }o--|| PIPES : "segment_id > id"
    TEMPLATES ||--o{ PROJECTS : "project_id > id"
    IMPORT_LOGS ||--o{ PROJECTS : "project_id > id"
    ERROR_LOGS ||--o{ PROJECTS : "project_id > id"
    ERROR_LOGS ||--o{ CALCULATIONS : "calculation_id > id"
```
