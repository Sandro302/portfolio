# Non-Functional Requirements — Engineering Calculation System

Нефункциональные требования к системе расчёта и визуализации параметров трубопровода.

---

## NFR-01. Производительность UI

- Среднее время отклика UI на основные операции (открытие экрана проекта, списка расчётов, результатов) не должно превышать 1–2 секунд при типовой нагрузке.
- Загрузка списков (проектов, расчётов) должна поддерживать постраничность (pagination) и фильтры.

---

## NFR-02. Время импорта

- Время импорта типового проекта OLGA должно укладываться в N минут (значение определяется бизнесом), при этом пользователь должен видеть индикатор выполнения/статуса.
- При долгих операциях импорт выполняется асинхронно, UI не должен «подвисать».

---

## NFR-03. Время расчёта

- Время выполнения расчёта зависит от сложности модели, однако система должна:
  - корректно обрабатывать долгие расчёты,
  - предоставлять актуальный статус (queued/running/completed/failed),
  - не блокировать UI.
- При превышении заданного лимита времени расчёт должен либо прерываться по таймауту, либо корректно помечаться как `failed`.

---

## NFR-04. Масштабируемость

- Система должна поддерживать одновременную работу нескольких пользователей и выполнение нескольких расчётов (в зависимости от конфигурации).
- Архитектура должна позволять горизонтальное масштабирование сервисов (API, Calculation Service) при росте нагрузки.

---

## NFR-05. Надёжность и устойчивость

- Все критичные операции (импорт, расчёты, сохранение результатов) должны быть устойчивы к временным сбоям:
  - использовать транзакции в БД там, где необходимо,
  - корректно обрабатывать ошибки внешних компонентов (Calculation Engine, файловая подсистема).
- При сбое расчёта система должна сохранять максимум контекста для последующего разбора (ERROR_LOGS, параметры).

---

## NFR-06. Целостность данных

- Связи между проектами, узлами, трубами, расчётами и результатами должны обеспечиваться на уровне БД (PRIMARY KEY, FOREIGN KEY, CHECK‑ограничения).
- Операции удаления должны быть спроектированы так, чтобы не оставлять «висящих» ссылок и неконсистентных данных (ON DELETE CASCADE / SET NULL — согласно модели).

---

## NFR-07. Логирование и аудит

- Система должна логировать:
  - импорты (IMPORT_LOGS),
  - расчёты (CALCULATIONS, ERROR_LOGS),
  - ошибки и исключения (ERROR_LOGS, системный лог).
- Для каждой важной операции должно быть возможно отследить:
  - кто её выполнил,
  - когда,
  - с какими основными параметрами,
  - каков результат (успех/ошибка).

---

## NFR-08. Безопасность доступа

- Доступ к системе должен осуществляться по защищённому протоколу (HTTPS).
- Должны быть предусмотрены механизмы аутентификации и авторизации пользователей (role‑based access control, уровни доступа к проектам).
- Для API должны использоваться токены/ключи доступа (например, JWT/OAuth2 или аналогичный механизм).

---

## NFR-09. UX и удобство использования

- Интерфейс должен быть интуитивно понятен для инженеров:
  - понятные названия полей и единицы измерения,
  - подсказки по вводу,
  - чёткие сообщения об ошибках/предупреждениях.
- Важные действия (запуск расчёта, удаление проекта) должны требовать явного подтверждения.

---

## NFR-10. Поддерживаемость и расширяемость

- Архитектура должна быть модульной:
  - отдельные сервисы для импорта, расчётов, экспорта, уведомлений.
- Документация (README, спецификации, диаграммы) должна поддерживаться в актуальном состоянии и быть достаточной для подключения новых разработчиков/аналитиков.
- Добавление новых типов расчётов или источников данных (кроме OLGA) не должно требовать полной переработки системы.

---

## NFR-11. Совместимость и окружение

- Система должна работать с PostgreSQL поддерживаемой версии (конкретная версия фиксируется в технических требованиях).
- Развёртывание должно быть возможным:
  - в on‑prem окружении,
  - или в контейнеризированной среде (Docker/Kubernetes) — при необходимости.

---

## NFR-12. Мониторинг и наблюдаемость

- Система должна предоставлять базовые метрики для мониторинга:
  - количество активных расчётов,
  - время выполнения расчётов,
  - количество ошибок.
- Логи и метрики должны быть интегрируемы в стандартные для компании решения мониторинга и логирования.

---
